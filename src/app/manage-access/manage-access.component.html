<app-sidebar></app-sidebar>
<app-header></app-header>
<section class="user-main-content">
  <div class="selectwrap">
    <div class="department-select" *ngIf="allDepartmentData">
      <h2>Choose Department</h2>
      <p-dropdown
        [options]="allDepartmentData.all_list"
        class="select-drop"
        defaultLabel="Select Department"
        placeholder="Select Department"
        optionLabel="department_name"
        optionValue="department_id"
        (onChange)="fetchRoleRespectToDepartMent($event.value)"
      >
      </p-dropdown>
    </div>

    <div class="department-select" *ngIf="allRoleData">
      <h2>Choose Role</h2>
      <p-dropdown
        [options]="allRoleData.all_list"
        class="select-drop"
        defaultLabel="Select Role"
        placeholder="Select Role"
        optionLabel="role_name"
        optionValue="role_id"
        (onChange)="selectTheRoleForAccess($event.value)"
      >
      </p-dropdown>
    </div>
  </div>

  <div class="table-wrap">
    <div class="m-table" *ngIf="accessModule">
      <p-table
        #dt2
        [value]="accessModule.All_list"
        [rows]="10"
        [tableStyle]="{ 'min-width': '50rem' }"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>Module Name</th>
            <th>Select All</th>
            <th>Add</th>
            <th>Edit</th>
            <th>View</th>
            <th>Delete</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-accessData let-rowIndex="rowIndex">
          <tr>
            <td>{{ accessData.module_name }}</td>
            <td>
              <p-checkbox
                (onChange)="selectEntireRow($event, rowIndex)"
                [binary]="true"
              ></p-checkbox>
            </td>
            <td>
              <p-checkbox
                [(ngModel)]="accessData.add_status"
                [binary]="true"
              ></p-checkbox>
            </td>
            <td>
              <p-checkbox
                [(ngModel)]="accessData.edit_status"
                [binary]="true"
              ></p-checkbox>
            </td>
            <td>
              <p-checkbox
                [(ngModel)]="accessData.view_status"
                [binary]="true"
              ></p-checkbox>
            </td>
            <td>
              <p-checkbox
                [(ngModel)]="accessData.delete_status"
                [binary]="true"
              ></p-checkbox>
            </td>
          </tr>
        </ng-template>
      </p-table>

      <div class="buttonwrap">
        <p-button type="button" label="Submit" (onClick)="saveModuleAccess()" />
      </div>
    </div>
  </div>
</section>
